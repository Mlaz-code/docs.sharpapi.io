# Middles

Detect middle opportunities in spread and total markets.

```
GET /api/v1/middles
```

## Authentication

Requires API key. **Sharp tier required.**

## What is a Middle?

A middle occurs when different sportsbooks offer spread/total lines that create a gap where both bets could win.

**Example:**
- Book A: Lakers -3.5 (-110)
- Book B: Celtics +5.5 (-110)

If Lakers win by 4 or 5, **both bets win**.

## Query Parameters

| Parameter | Type | Required | Default | Description |
|-----------|------|----------|---------|-------------|
| `sports` | string | No | all | Comma-separated sports |
| `min_gap` | number | No | 1 | Minimum gap size |
| `market_type` | string | No | both | spread, total, or both |
| `limit` | integer | No | 50 | Max results (max 200) |

## Response

| Field | Type | Description |
|-------|------|-------------|
| `success` | boolean | Request status |
| `timestamp` | string | ISO 8601 timestamp |
| `summary` | object | Summary statistics |
| `count` | number | Results returned |
| `middles` | array | Middle opportunities |

### Summary Object

| Field | Type | Description |
|-------|------|-------------|
| `total` | number | Total middles found |
| `avgMiddleSize` | number | Average gap size |
| `avgBestCase` | number | Average best case profit |
| `byMarketType` | object | Count by market type |

### Middle Object

| Field | Type | Description |
|-------|------|-------------|
| `eventId` | string | Event identifier |
| `eventName` | string | Event name |
| `sport` | string | Sport |
| `league` | string | League |
| `marketType` | string | spread or total |
| `side1` | object | First bet details |
| `side2` | object | Second bet details |
| `middleSize` | number | Gap size (points) |
| `middleNumbers` | number[] | Numbers that hit middle |
| `worstCaseLoss` | number | Max loss percentage |
| `bestCaseProfit` | number | Max profit percentage |
| `breakEvenPercent` | number | Required hit rate |
| `detectedAt` | string | Detection timestamp |

### Side Object

| Field | Type | Description |
|-------|------|-------------|
| `book` | string | Sportsbook |
| `selection` | string | Selection name |
| `line` | number | Line value |
| `odds` | object | Odds (american/decimal/probability) |
| `stakePercent` | number | Recommended stake % |

### Example Request

```bash cURL
curl -X GET "https://sharpapi.io/api/v1/middles?sports=nba&min_gap=2" \
  -H "X-API-Key: YOUR_API_KEY"
```

```javascript JavaScript
const response = await fetch(
  'https://sharpapi.io/api/v1/middles?sports=nba&min_gap=2',
  { headers: { 'X-API-Key': 'YOUR_API_KEY' } }
);
const data = await response.json();
```

```python Python
import requests

response = requests.get(
    'https://sharpapi.io/api/v1/middles',
    params={'sports': 'nba', 'min_gap': 2},
    headers={'X-API-Key': 'YOUR_API_KEY'}
)
data = response.json()
```

### Response

```json 200
{
  "success": true,
  "timestamp": "2024-01-15T10:30:00.000Z",
  "summary": {
    "total": 5,
    "avgMiddleSize": 2.3,
    "avgBestCase": 85.0,
    "byMarketType": {
      "spread": 3,
      "total": 2
    }
  },
  "count": 5,
  "filters": {
    "sports": ["nba"],
    "marketType": "both",
    "minGap": 2
  },
  "middles": [
    {
      "eventId": "evt_nba_lal_bos_20240115",
      "eventName": "Los Angeles Lakers @ Boston Celtics",
      "sport": "basketball",
      "league": "NBA",
      "marketType": "spread",
      "side1": {
        "book": "draftkings",
        "selection": "Boston Celtics",
        "line": -4.5,
        "odds": {
          "american": -110,
          "decimal": 1.909,
          "probability": 0.524
        },
        "stakePercent": 52.4
      },
      "side2": {
        "book": "fanduel",
        "selection": "Los Angeles Lakers",
        "line": 7.5,
        "odds": {
          "american": -110,
          "decimal": 1.909,
          "probability": 0.524
        },
        "stakePercent": 47.6
      },
      "middleSize": 3.0,
      "middleNumbers": [5, 6, 7],
      "worstCaseLoss": 4.8,
      "bestCaseProfit": 90.9,
      "breakEvenPercent": 5.0,
      "detectedAt": "2024-01-15T10:30:00.000Z"
    }
  ]
}
```

```json 403
{
  "error": "Sharp tier required for middles endpoint",
  "code": "tier_required",
  "required_tier": "sharp",
  "upgrade_url": "https://sharpapi.io/pricing"
}
```

## Understanding Middle Outcomes

Using the example above (Celtics -4.5, Lakers +7.5):

| Result | Side 1 | Side 2 | Outcome |
|--------|--------|--------|---------|
| Celtics win by 8+ | Win | Lose | Small loss |
| Celtics win by 5-7 | **Win** | **Win** | Big profit |
| Lakers win or close | Lose | Win | Small loss |

## When Middles Are Valuable

1. **Large gaps**: 3+ point middles have better hit rates
2. **Key numbers**: NBA (3, 7), NFL (3, 7, 10), Hockey (1)
3. **Low juice**: Minimize worst-case loss
4. **Timing**: Act quickly - lines move fast

## Risk vs Reward

- **Worst case**: Lose ~5% (the vig on both sides)
- **Best case**: Win ~90% (both sides pay out)
- **Breakeven**: Middle needs to hit ~5% of the time
