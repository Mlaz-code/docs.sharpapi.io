import { Callout, Tabs } from 'nextra/components'

# Arbitrage

Get current arbitrage opportunities across sportsbooks.

```
GET /api/v1/arbitrage
```

<Callout type="warning">
This endpoint requires **Pro** tier or higher.
</Callout>

## How Arbitrage Works

Arbitrage occurs when the combined implied probability across books is less than 100%:

1. Find best odds for each outcome across all books
2. Calculate combined implied probability
3. **If total < 100%, arbitrage exists**
4. Profit % = (100 / total) - 100

<Callout type="info">
A 2% arbitrage means guaranteed $2 profit per $100 wagered, regardless of outcome.
</Callout>

## Query Parameters

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| `sports` | string | all | Comma-separated sports filter (e.g., `nba,nfl`) |
| `min_profit` | number | `0.5` | Minimum profit percentage to return |
| `format` | string | `json` | Response format: `json` or `csv` |

## Response Formats

### JSON Format (Default)

Returns structured JSON with full details about each opportunity.

### CSV Format

Returns a downloadable CSV file for import into spreadsheets. Add `?format=csv` to your request.

```bash
curl -X GET "https://api.sharpapi.io/api/v1/arbitrage?format=csv" \
  -H "X-API-Key: YOUR_API_KEY" \
  -o arbitrage.csv
```

CSV columns: `event_id`, `event_name`, `sport`, `market_type`, `profit_percent`, `leg1_book`, `leg1_selection`, `leg1_odds`, `leg1_stake_percent`, `leg2_book`, `leg2_selection`, `leg2_odds`, `leg2_stake_percent`, `detected_at`

## Example Requests

<Tabs items={['cURL', 'JavaScript', 'Python']}>
  <Tabs.Tab>
```bash
curl -X GET "https://api.sharpapi.io/api/v1/arbitrage?min_profit=1.0" \
  -H "X-API-Key: YOUR_API_KEY"
```
  </Tabs.Tab>
  <Tabs.Tab>
```javascript
const response = await fetch(
  'https://api.sharpapi.io/api/v1/arbitrage?min_profit=1.0',
  { headers: { 'X-API-Key': 'YOUR_API_KEY' } }
);
const { data, meta } = await response.json();

data.forEach(arb => {
  console.log(`${arb.eventName}: ${arb.profitPercent}% guaranteed profit`);
  arb.legs.forEach(leg => {
    console.log(`  ${leg.sportsbook}: ${leg.selection} @ ${leg.odds} (${leg.stakePercent}%)`);
  });
});
```
  </Tabs.Tab>
  <Tabs.Tab>
```python
import requests

response = requests.get(
    'https://api.sharpapi.io/api/v1/arbitrage',
    params={'min_profit': 1.0},
    headers={'X-API-Key': 'YOUR_API_KEY'}
)

for arb in response.json()['data']:
    print(f"{arb['eventName']}: {arb['profitPercent']}% profit")
    for leg in arb['legs']:
        print(f"  {leg['sportsbook']}: {leg['selection']} - stake {leg['stakePercent']}%")
```
  </Tabs.Tab>
</Tabs>

## Response

### Success (200)

```json
{
  "data": [
    {
      "eventId": "33483200",
      "eventName": "BOS Celtics @ MIA Heat",
      "sport": "nba",
      "marketType": "moneyline",
      "profitPercent": 2.15,
      "impliedTotal": 0.9789,
      "legs": [
        {
          "sportsbook": "draftkings",
          "selection": "BOS Celtics",
          "odds": -145,
          "decimalOdds": 1.69,
          "stakePercent": 59.17
        },
        {
          "sportsbook": "pinnacle",
          "selection": "MIA Heat",
          "odds": 155,
          "decimalOdds": 2.55,
          "stakePercent": 40.83
        }
      ],
      "detectedAt": "2026-01-26T02:19:55.000Z"
    }
  ],
  "meta": {
    "count": 5,
    "total": 5,
    "summary": {
      "avgProfit": 1.8,
      "maxProfit": 3.2,
      "byMarket": { "moneyline": 3, "spread": 2 },
      "bySport": { "nba": 3, "nhl": 2 }
    },
    "updated": "2026-01-26T02:20:00.000Z"
  }
}
```

### Error Responses

```json title="403 Tier Restricted"
{
  "error": {
    "code": "tier_restricted",
    "message": "Arbitrage detection requires Pro or Sharp tier"
  }
}
```

## Calculating Stakes

The `stakePercent` values tell you how to split your bankroll:

**Example with $1000 total stake:**

| Leg | Stake % | Amount | Odds | Potential Return |
|-----|---------|--------|------|------------------|
| BOS @ DraftKings | 59.17% | $591.70 | -145 | $1,000 |
| MIA @ Pinnacle | 40.83% | $408.30 | +155 | $1,041.18 |

**Guaranteed profit: ~$21.50 (2.15%)**

<Callout type="warning">
Sportsbooks may limit or ban accounts that consistently place arbitrage bets. Use at your own risk.
</Callout>

## Arbitrage Schema

| Field | Type | Description |
|-------|------|-------------|
| `eventId` | string | Event identifier |
| `eventName` | string | Readable event name |
| `sport` | string | Sport (e.g., `nba`) |
| `marketType` | string | Market type |
| `profitPercent` | number | Guaranteed profit (%) |
| `impliedTotal` | number | Combined implied probability (< 1.0 = arb exists) |
| `legs` | array | Individual bets to place |
| `legs[].sportsbook` | string | Sportsbook for this leg |
| `legs[].selection` | string | Selection to bet |
| `legs[].odds` | number | American odds |
| `legs[].decimalOdds` | number | Decimal odds |
| `legs[].stakePercent` | number | % of total stake |
| `detectedAt` | string | When opportunity was detected |

## Best Practices

1. **Act quickly** - Arbitrage opportunities disappear fast (seconds to minutes)
2. **Round bet amounts** - Odd amounts ($591.70) may trigger limits
3. **Vary your betting patterns** - Consistent arb betting attracts attention
4. **Use streaming** - Real-time alerts via SSE let you react faster
5. **Consider execution risk** - Odds may change between legs
