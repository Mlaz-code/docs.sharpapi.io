# Expected Value (EV)

Get current +EV betting opportunities based on sharp book reference.

```
GET /api/v1/ev
```

> **Note:** This endpoint requires **Pro** tier or higher.

## How +EV is Calculated

SharpAPI uses Pinnacle (a sharp book) as the reference for true probability:

1. Get the sharp book's odds for both sides of a market
2. Remove the vig to calculate "fair" probability
3. Compare soft book odds to fair probability
4. **EV% = (fair_probability × decimal_odds - 1) × 100**

> **Tip:**
  A +3% EV means for every $100 wagered, you expect to profit $3 long-term.


## Query Parameters

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| `sports` | string | all | Comma-separated sports filter |
| `books` | string | all | Target sportsbooks to find +EV on (e.g., `draftkings,fanduel`) |
| `threshold` | number | `2.0` | Minimum EV percentage to return |
| `api_key` | string | - | API key (alternative to `X-API-Key` header) |

## Response

| Field | Type | Description |
|-------|------|-------------|
| `success` | boolean | Whether the request succeeded |
| `timestamp` | string | ISO 8601 timestamp |
| `summary` | object | Summary statistics for opportunities found |
| `opportunities` | array | Array of +EV betting opportunities |


### Example Request


```bash cURL
curl -X GET "https://sharpapi.io/api/v1/ev?threshold=3.0&books=draftkings" \
  -H "X-API-Key: YOUR_API_KEY"
```

```javascript JavaScript
const response = await fetch(
  'https://sharpapi.io/api/v1/ev?threshold=3.0',
  { headers: { 'X-API-Key': 'YOUR_API_KEY' } }
);
const { opportunities } = await response.json();

opportunities.forEach(opp => {
  console.log(`${opp.selection} @ ${opp.sportsbook}: +${opp.evPercent}% EV`);
});
```

```python Python
import requests

response = requests.get(
    'https://sharpapi.io/api/v1/ev',
    params={'threshold': 3.0, 'books': 'draftkings'},
    headers={'X-API-Key': 'YOUR_API_KEY'}
)

for opp in response.json()['opportunities']:
    print(f"{opp['selection']} @ {opp['sportsbook']}: +{opp['evPercent']}% EV")
```



### Response


```json 200
{
  "success": true,
  "timestamp": "2024-01-21T02:15:00.000Z",
  "summary": {
    "count": 12,
    "avgEV": 4.2,
    "maxEV": 8.5,
    "avgKelly": 2.1,
    "byBook": { "draftkings": 8, "fanduel": 4 },
    "bySport": { "nba": 7, "nfl": 5 }
  },
  "opportunities": [
    {
      "eventId": "33483153",
      "eventName": "PHO Suns @ PHI 76ers",
      "sport": "nba",
      "marketType": "spread",
      "sportsbook": "draftkings",
      "selection": "PHO Suns -3.5",
      "odds": -105,
      "decimalOdds": 1.952,
      "sharpOdds": -115,
      "sharpDecimalOdds": 1.87,
      "sharpBook": "pinnacle",
      "fairProbability": 53.5,
      "evPercent": 4.35,
      "kellyPercent": 2.18,
      "detectedAt": "2024-01-21T02:14:58.000Z"
    }
  ]
}
```

```json 403
{
  "error": "+EV detection requires Pro or Sharp tier",
  "code": "feature_not_available",
  "upgrade_url": "https://sharpapi.io/pricing"
}
```



## EV Opportunity Schema

| Field | Type | Description |
|-------|------|-------------|
| `eventId` | string | Event identifier |
| `eventName` | string | Readable event name |
| `sportsbook` | string | Book with +EV line |
| `selection` | string | The bet selection |
| `odds` | number | American odds at soft book |
| `sharpOdds` | number | American odds at sharp book |
| `fairProbability` | number | No-vig probability (%) |
| `evPercent` | number | Expected value (%) |
| `kellyPercent` | number | Recommended stake (%) |

## Kelly Criterion

The `kellyPercent` field indicates optimal bet sizing based on edge:

```
Kelly % = (p × b - q) / b
where:
  p = probability of winning
  q = 1 - p
  b = decimal odds - 1
```

> **Warning:**
  Kelly percentages are capped at 25% for safety. Consider using fractional Kelly (1/4 or 1/2) for bankroll management.

